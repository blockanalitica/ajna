"use client";

import FancyGraph from "@/components/graph/FancyGraph";
import { compact } from "@/utils/number";
import { DateTime } from "luxon";

const TestGraphs = () => {
  const results = [
    {
      total_supply: 208057450.659815,
      total_borrow: 136901734.157786,
      utilization: 0.658,
      supply_rate: 0.021385,
      borrow_rate: 0.03803,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.056127,
      available_liquidity: 71155716.502029,
      underlying_price: 0.9998,
      datetime: "2023-04-11T01:00:00",
      total_supply_usd: 208015839.16968304,
      total_borrow_usd: 136874353.81095445,
      dt: "2023-04-11T00:00:00",
    },
    {
      total_supply: 209090229.786667,
      total_borrow: 140983826.783481,
      utilization: 0.674273,
      supply_rate: 0.021914,
      borrow_rate: 0.0386,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.054207,
      available_liquidity: 68106403.003186,
      underlying_price: 0.9998,
      datetime: "2023-04-12T00:00:00",
      total_supply_usd: 209048411.74070966,
      total_borrow_usd: 140955630.0181243,
      dt: "2023-04-12T00:00:00",
    },
    {
      total_supply: 209076125.996568,
      total_borrow: 137418792.563097,
      utilization: 0.657267,
      supply_rate: 0.021361,
      borrow_rate: 0.038004,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.055036,
      available_liquidity: 71657333.433471,
      underlying_price: 0.999739,
      datetime: "2023-04-13T00:00:00",
      total_supply_usd: 209021557.1276829,
      total_borrow_usd: 137382926.25823802,
      dt: "2023-04-13T00:00:00",
    },
    {
      total_supply: 216778630.878109,
      total_borrow: 160201853.99045,
      utilization: 0.739011,
      supply_rate: 0.024018,
      borrow_rate: 0.040865,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.04862,
      available_liquidity: 56576776.887659,
      underlying_price: 0.99987,
      datetime: "2023-04-14T00:00:00",
      total_supply_usd: 216750449.65609485,
      total_borrow_usd: 160181027.74943125,
      dt: "2023-04-14T00:00:00",
    },
    {
      total_supply: 219802836.422775,
      total_borrow: 177266092.152802,
      utilization: 0.806478,
      supply_rate: 0.028591,
      borrow_rate: 0.044619,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.044791,
      available_liquidity: 42536744.269973,
      underlying_price: 0.99993,
      datetime: "2023-04-15T00:00:00",
      total_supply_usd: 219787450.2242254,
      total_borrow_usd: 177253683.5263513,
      dt: "2023-04-15T00:00:00",
    },
    {
      total_supply: 226319880.402595,
      total_borrow: 181192109.582134,
      utilization: 0.800602,
      supply_rate: 0.026241,
      borrow_rate: 0.04315,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.043926,
      available_liquidity: 45127770.820461,
      underlying_price: 0.999921,
      datetime: "2023-04-16T00:00:00",
      total_supply_usd: 226302001.13204318,
      total_borrow_usd: 181177795.40547702,
      dt: "2023-04-16T00:00:00",
    },
    {
      total_supply: 224907698.328617,
      total_borrow: 184397977.334978,
      utilization: 0.819883,
      supply_rate: 0.033953,
      borrow_rate: 0.047971,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.044097,
      available_liquidity: 40509720.993639,
      underlying_price: 0.999818,
      datetime: "2023-04-17T00:00:00",
      total_supply_usd: 224866765.1275212,
      total_borrow_usd: 184364416.90310302,
      dt: "2023-04-17T00:00:00",
    },
    {
      total_supply: 233533828.736072,
      total_borrow: 195991440.307158,
      utilization: 0.839242,
      supply_rate: 0.041697,
      borrow_rate: 0.052811,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.040772,
      available_liquidity: 37542388.428914,
      underlying_price: 0.9998,
      datetime: "2023-04-18T00:00:00",
      total_supply_usd: 233487121.97032478,
      total_borrow_usd: 195952242.01909658,
      dt: "2023-04-18T00:00:00",
    },
    {
      total_supply: 236309840.308382,
      total_borrow: 195082838.490779,
      utilization: 0.825538,
      supply_rate: 0.036215,
      borrow_rate: 0.049385,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.04168,
      available_liquidity: 41227001.817603,
      underlying_price: 0.9999,
      datetime: "2023-04-19T00:00:00",
      total_supply_usd: 236286209.32435116,
      total_borrow_usd: 195063330.20692992,
      dt: "2023-04-19T00:00:00",
    },
    {
      total_supply: 238232762.46093,
      total_borrow: 187228113.789541,
      utilization: 0.785904,
      supply_rate: 0.025542,
      borrow_rate: 0.042507,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.038651,
      available_liquidity: 51004648.671389,
      underlying_price: 1.000016,
      datetime: "2023-04-20T00:00:00",
      total_supply_usd: 238236574.18512937,
      total_borrow_usd: 187231109.43936163,
      dt: "2023-04-20T00:00:00",
    },
    {
      total_supply: 238001082.814319,
      total_borrow: 197247208.840931,
      utilization: 0.828766,
      supply_rate: 0.037506,
      borrow_rate: 0.050192,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.036163,
      available_liquidity: 40753873.973388,
      underlying_price: 1.0,
      datetime: "2023-04-21T00:00:00",
      total_supply_usd: 238001082.814319,
      total_borrow_usd: 197247208.840931,
      dt: "2023-04-21T00:00:00",
    },
    {
      total_supply: 249505067.590205,
      total_borrow: 194779683.591416,
      utilization: 0.780664,
      supply_rate: 0.025372,
      borrow_rate: 0.042323,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03496,
      available_liquidity: 54725383.998789,
      underlying_price: 1.00002,
      datetime: "2023-04-22T00:00:00",
      total_supply_usd: 249510057.6915568,
      total_borrow_usd: 194783579.18508783,
      dt: "2023-04-22T00:00:00",
    },
    {
      total_supply: 256732965.587159,
      total_borrow: 200478745.11676,
      utilization: 0.780884,
      supply_rate: 0.025379,
      borrow_rate: 0.042331,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03514,
      available_liquidity: 56254220.470399,
      underlying_price: 1.0002,
      datetime: "2023-04-23T00:00:00",
      total_supply_usd: 256784312.18027642,
      total_borrow_usd: 200518840.86578336,
      dt: "2023-04-23T00:00:00",
    },
    {
      total_supply: 256781325.528705,
      total_borrow: 200657383.753201,
      utilization: 0.781433,
      supply_rate: 0.025397,
      borrow_rate: 0.04235,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03467,
      available_liquidity: 56123941.775504,
      underlying_price: 1.000056,
      datetime: "2023-04-24T00:00:00",
      total_supply_usd: 256795705.2829346,
      total_borrow_usd: 200668620.5666912,
      dt: "2023-04-24T00:00:00",
    },
    {
      total_supply: 246475292.968082,
      total_borrow: 206770068.184578,
      utilization: 0.838908,
      supply_rate: 0.041563,
      borrow_rate: 0.052727,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033847,
      available_liquidity: 39705224.783504,
      underlying_price: 1.000011,
      datetime: "2023-04-25T00:00:00",
      total_supply_usd: 246478004.19630465,
      total_borrow_usd: 206772342.65532804,
      dt: "2023-04-25T00:00:00",
    },
    {
      total_supply: 251713520.757363,
      total_borrow: 205315272.705541,
      utilization: 0.81567,
      supply_rate: 0.032268,
      borrow_rate: 0.046918,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.034387,
      available_liquidity: 46398248.051822,
      underlying_price: 0.9999,
      datetime: "2023-04-26T00:00:00",
      total_supply_usd: 251688349.40528727,
      total_borrow_usd: 205294741.17827046,
      dt: "2023-04-26T00:00:00",
    },
    {
      total_supply: 250113902.986731,
      total_borrow: 209120492.510932,
      utilization: 0.836101,
      supply_rate: 0.04044,
      borrow_rate: 0.052025,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033302,
      available_liquidity: 40993410.475799,
      underlying_price: 1.000126,
      datetime: "2023-04-27T00:00:00",
      total_supply_usd: 250145417.33850732,
      total_borrow_usd: 209146841.69298837,
      dt: "2023-04-27T00:00:00",
    },
    {
      total_supply: 261075965.662055,
      total_borrow: 220233082.503251,
      utilization: 0.843559,
      supply_rate: 0.043424,
      borrow_rate: 0.05389,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03252,
      available_liquidity: 40842883.158804,
      underlying_price: 0.999952,
      datetime: "2023-04-28T00:00:00",
      total_supply_usd: 261063434.01570323,
      total_borrow_usd: 220222511.31529084,
      dt: "2023-04-28T00:00:00",
    },
    {
      total_supply: 262410542.12747,
      total_borrow: 220861020.811656,
      utilization: 0.841662,
      supply_rate: 0.042665,
      borrow_rate: 0.053416,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.032427,
      available_liquidity: 41549521.315814,
      underlying_price: 0.99999,
      datetime: "2023-04-29T00:00:00",
      total_supply_usd: 262407918.0220487,
      total_borrow_usd: 220858812.20144787,
      dt: "2023-04-29T00:00:00",
    },
    {
      total_supply: 257257719.475669,
      total_borrow: 220931038.001622,
      utilization: 0.858793,
      supply_rate: 0.049517,
      borrow_rate: 0.057698,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033837,
      available_liquidity: 36326681.474047,
      underlying_price: 1.000132,
      datetime: "2023-04-30T00:00:00",
      total_supply_usd: 257291677.49463978,
      total_borrow_usd: 220960200.89863822,
      dt: "2023-04-30T00:00:00",
    },
    {
      total_supply: 259051422.445352,
      total_borrow: 215883826.518699,
      utilization: 0.833363,
      supply_rate: 0.039345,
      borrow_rate: 0.051341,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033995,
      available_liquidity: 43167595.926653,
      underlying_price: 1.000034,
      datetime: "2023-05-01T00:00:00",
      total_supply_usd: 259060230.19371516,
      total_borrow_usd: 215891166.56880063,
      dt: "2023-05-01T00:00:00",
    },
    {
      total_supply: 262890236.749227,
      total_borrow: 214646897.077377,
      utilization: 0.816489,
      supply_rate: 0.032595,
      borrow_rate: 0.047122,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.032751,
      available_liquidity: 48243339.67185,
      underlying_price: 1.0,
      datetime: "2023-05-02T00:00:00",
      total_supply_usd: 262890236.749227,
      total_borrow_usd: 214646897.077377,
      dt: "2023-05-02T00:00:00",
    },
    {
      total_supply: 263406791.797032,
      total_borrow: 211190732.698031,
      utilization: 0.801766,
      supply_rate: 0.026707,
      borrow_rate: 0.043442,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033173,
      available_liquidity: 52216059.099001,
      underlying_price: 1.000402,
      datetime: "2023-05-03T00:00:00",
      total_supply_usd: 263512681.3273344,
      total_borrow_usd: 211275631.3725756,
      dt: "2023-05-03T00:00:00",
    },
    {
      total_supply: 262084849.246451,
      total_borrow: 211032658.052499,
      utilization: 0.805207,
      supply_rate: 0.028083,
      borrow_rate: 0.044302,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03398,
      available_liquidity: 51052191.193952,
      underlying_price: 1.000014,
      datetime: "2023-05-04T00:00:00",
      total_supply_usd: 262088518.43434045,
      total_borrow_usd: 211035612.50971174,
      dt: "2023-05-04T00:00:00",
    },
    {
      total_supply: 254867764.32415,
      total_borrow: 211262652.677431,
      utilization: 0.828911,
      supply_rate: 0.037564,
      borrow_rate: 0.050228,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033237,
      available_liquidity: 43605111.646719,
      underlying_price: 0.99993,
      datetime: "2023-05-05T00:00:00",
      total_supply_usd: 254849923.58064732,
      total_borrow_usd: 211247864.29174358,
      dt: "2023-05-05T00:00:00",
    },
    {
      total_supply: 264867766.427648,
      total_borrow: 211405804.595797,
      utilization: 0.798156,
      supply_rate: 0.02594,
      borrow_rate: 0.042935,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.033971,
      available_liquidity: 53461961.831851,
      underlying_price: 1.000106,
      datetime: "2023-05-06T00:00:00",
      total_supply_usd: 264895842.41088933,
      total_borrow_usd: 211428213.61108416,
      dt: "2023-05-06T00:00:00",
    },
    {
      total_supply: 264866104.989407,
      total_borrow: 211393274.457589,
      utilization: 0.798114,
      supply_rate: 0.025939,
      borrow_rate: 0.042934,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.032725,
      available_liquidity: 53472830.531818,
      underlying_price: 0.99994,
      datetime: "2023-05-07T00:00:00",
      total_supply_usd: 264850213.02310765,
      total_borrow_usd: 211380590.86112154,
      dt: "2023-05-07T00:00:00",
    },
    {
      total_supply: 265237075.866023,
      total_borrow: 211510559.052311,
      utilization: 0.79744,
      supply_rate: 0.025917,
      borrow_rate: 0.04291,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.032128,
      available_liquidity: 53726516.813712,
      underlying_price: 1.000041,
      datetime: "2023-05-08T00:00:00",
      total_supply_usd: 265247950.5861335,
      total_borrow_usd: 211519230.98523214,
      dt: "2023-05-08T00:00:00",
    },
    {
      total_supply: 253101710.384481,
      total_borrow: 207951996.093249,
      utilization: 0.821614,
      supply_rate: 0.034646,
      borrow_rate: 0.048404,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.03087,
      available_liquidity: 45149714.291232,
      underlying_price: 1.000196,
      datetime: "2023-05-09T00:00:00",
      total_supply_usd: 253151318.31971636,
      total_borrow_usd: 207992754.6844833,
      dt: "2023-05-09T00:00:00",
    },
    {
      total_supply: 253615272.266314,
      total_borrow: 208479851.061979,
      utilization: 0.822032,
      supply_rate: 0.034813,
      borrow_rate: 0.048508,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.030793,
      available_liquidity: 45135421.204335,
      underlying_price: 1.000303,
      datetime: "2023-05-10T00:00:00",
      total_supply_usd: 253692117.6938107,
      total_borrow_usd: 208543020.45685077,
      dt: "2023-05-10T00:00:00",
    },
    {
      total_supply: 254671756.447416,
      total_borrow: 208824301.125626,
      utilization: 0.819974,
      supply_rate: 0.03399,
      borrow_rate: 0.047994,
      supply_reward_rate: 0.0,
      borrow_reward_rate: 0.030861,
      available_liquidity: 45847455.32179,
      underlying_price: 0.999833,
      datetime: "2023-05-11T00:00:00",
      total_supply_usd: 254629226.2640893,
      total_borrow_usd: 208789427.46733803,
      dt: "2023-05-11T00:00:00",
    },
  ];

  const data1 = [];

  results.forEach((row) => {
    data1.push({
      x: row.datetime,
      y: row.total_supply,
    });
  });

  const series = [
    {
      label: "earn",
      data: data1,
    },
  ];

  const options = {
    interaction: {
      axis: "x",
    },
    scales: {
      x: {
        type: "time",
        time: {
          unit: "day",
        },
      },
      y: {
        ticks: {
          callback: (value) => compact(value, 2, true),
        },
      },
    },
  };

  const valueFormatter = (value) => {
    return compact(value, 2, true);
  };

  const subvalueFormatter = (value) => {
    let date;
    if (typeof value == "number") {
      date = DateTime.fromMillis(value);
    } else {
      date = DateTime.fromISO(value);
    }

    return date.toFormat("LLL dd, y");
  };

  return (
    <div className="grid grid-cols-2 gap-4 ">
      <FancyGraph
        series={series}
        options={options}
        valueFormatter={valueFormatter}
        subvalueFormatter={subvalueFormatter}
      />

      <FancyGraph
        series={series}
        options={options}
        valueFormatter={valueFormatter}
        subvalueFormatter={subvalueFormatter}
        type="bar"
      />
    </div>
  );
};

export default TestGraphs;
